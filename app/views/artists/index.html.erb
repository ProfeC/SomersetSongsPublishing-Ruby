<!-- Render page title -->
<%=
  render 'application/page_title',
  title: 'Artists',
  leading_text: '',
  subtitle: ''
%>

<!-- Search Bar -->
<%= render(:partial => "application/search_form") %>

<!-- <p>Or you can complete the Music Search request  with a brief description of what you are looking for and we will respond with music suggestions.</p> -->

<!-- <section class="artist index wow fadeInUp"> -->
<section class="artist index">
  <table class="table table-hover table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Albums</th>
      <th>Songs</th>
      <!-- <th colspan="3"></th> -->
    </tr>
  </thead>

  <tbody>
    <%
    @artists.each do |artist|
      songs_count = 0

    # Get the number of albums for this artist.
    albums = Album.where(artist_id: artist.id)
    albums_count = albums.length

    # Get a list of songs for each album
    if albums_count > 0
      albums.each do |album|
        songs = Song.all.where(album_id: album.id)
        songs_count += songs.length
      end

      # songs_count = songs.length
    end
    %>


      <tr>
        <td><%= link_to artist.name, artist %></td>
        <td><%= albums_count %></td>
        <td><%= songs_count %></td>
<!--         <td><%= link_to 'Show', artist %></td>
        <td><%= link_to 'Edit', edit_artist_path(artist) %></td>
        <td><%= link_to 'Destroy', artist, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
      </tr>
    <% end %>
  </tbody>
</table>
</section>

<br>

<%= link_to 'New Artist', new_artist_path %>
